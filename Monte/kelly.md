
蒙特卡罗算法，到底是干什么的？这个名词经常在金融行业或者其他许多领域听到，今天就和大家揭开这个神秘的面纱。


为什么会在很多领域听到蒙特卡罗，因为这是一个很神奇的算法，它可以模拟出很多场景，并且模拟出来的数据，可能与真实的数据相差无几，虽然不是十分精准，但是可以用，给人的感觉就是：
“我也不知道为什么，反正这样搞就没有问题”
但这样模拟的成本远远低于真实数据的获取，或者说模拟的这些数据在实际生活暂时也是无法获取到的。
废话不多少，今天，我就用蒙特卡罗算法，做两个简单的模拟。一个是π值计算，另外一个求积分。
一、π值
π值是一个无理数，无限不循环，公元480年左右，南北朝时期的数学家祖之冲竟得出精确到小数点后7位的结果，今天，我们用计算机来模拟一把，我模拟的结果如何。
首先来说明模拟的思路，如下图所示，通过推导出正方形和内切圆面积存在比例关系，只要计算出它俩的面积比值，我们就可以求出π。
那怎么在不使用π的情况下，计算内切圆的面积。我们可以用打点的方式，在正方形区域随机打点n个，如果在内切圆的区域内有x个，则它俩的面积比就是n/x。如果这个n很大，则结果也是十分准确的。

![kelly1](https://github.com/hellowangheng/datazhi/blob/master/img-folder/Monte/IMG_0257.PNG)

具体代码如下
    while j < first_count: #first_count，模拟的总次数
        x = random.uniform(-1, 1)
        y = random.uniform(0, 1)
        if   x**2 + y**2 < 1:
            count_s = count_s + 1 #在圆内的点的个数
        j = j + 1
　　模拟出来的结果如下，在模拟超过1w次后，结果已经趋于稳定，基本等于3.14，这已经基本我们大部分使用场景。
  ![kelly1](https://github.com/hellowangheng/datazhi/blob/master/img-folder/Monte/%CF%801.png)
  二、积分
 
积分实际也可以理解是计算面试，比如下图，是y = -x^2+1 的函数图形，现在用蒙特卡罗求一下该函数的积分。
思路和求π的方法一致，也是通过随机打点的方式，根据在积分区域的散点数与矩形区域内散点数之比，乘以矩形面积，就是该积分区域面积。
  ![kelly1](https://github.com/hellowangheng/datazhi/blob/master/img-folder/Monte/IMG_0259.jpeg)
  分析模拟结果如下图，可以看到模拟3w到多次时，准确率很高了，与1.33不断接近，在9w次之后，基本保持重叠。
代码实现思路与求π基本一致，源码可以在文末点击阅读原文获取。
  ![kelly1](https://github.com/hellowangheng/datazhi/blob/master/img-folder/Monte/jf.png)

 通过蒙特卡罗模拟，生成一系列符合预期要求的随机数，就可以模拟出一个十分接近实际值的近似值，十分适应于对数值计算精度要求不是很高的场景，比如，我们在计算圆面积时，通常都会取3.14，而不会取3.1415926.....等。




  
